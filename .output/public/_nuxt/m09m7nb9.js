import{_ as h}from"./b8cufphi.js";import{e as k,f as _,r as l,k as w,l as E,m as B,c as r,b as C,h as c,a as N,F as x,n as M,o as a,i as b}from"./c6lvz2om.js";import{u as F,a as m}from"./mu41mkrl.js";import{m as V,a as I,_ as L}from"./n2mvuj8p.js";import"./k2lpch8j.js";import"./ou69qqfo.js";import"./mtqglvzn.js";import"./b72e89xr.js";import"./bbphsdkx.js";import"./ci6p5ad3.js";import"./cmw3t82p.js";import"./mjllnmi0.js";import"./gvd3ebac.js";const $={class:"flex flex-col divide-y divide-[#C0BEBF]/20"},z={key:1,class:"text-xs text-center text-gray-500 py-2"},T=k({__name:"index",setup(A){const y=_("userinfo"),v=_("sysConfig"),u=l(null),g=F(u);w(g,async e=>{e&&v.value.enableAutoLoadNextPage&&await p()});const i=l(!1),s=E({page:1,size:10}),t=l([]);B(async()=>{await d()});const d=async()=>{s.page=1;const e=await m("/memo/list",s);t.value=e.list,i.value=e.hasNext},p=async()=>{s.page=s.page+1;const e=await m("/memo/list",s);t.value=[...t.value,...e.list],i.value=e.hasNext};return V.on(async()=>{await d()}),I.on(async e=>{const f=await m("/memo/get?latest=1&id="+e),o=t.value.findIndex(n=>n.id===e);o>=0&&(t.value[o]=f)}),(e,f)=>{const o=h;return a(),r(x,null,[C(o,{user:c(y)},null,8,["user"]),N("div",$,[(a(!0),r(x,null,M(c(t),n=>(a(),b(L,{memo:n,key:n.id,"show-full":!1},null,8,["memo"]))),128))]),c(i)?(a(),r("div",{key:0,ref_key:"loadMoreEle",ref:u,class:"text-xs text-center text-gray-500 py-2 cursor-pointer",onClick:p},"点击加载更多",512)):(a(),r("div",z,"已经到底啦"))],64)}}});export{T as default};
