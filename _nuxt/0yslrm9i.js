import{_ as w,a as h}from"./cdhi6rl9.js";import{e as C,r as u,k as B,g as E,l as N,m as V,c as r,h as o,i as v,j as I,a as x,b as M,w as b,F as y,n as F,o as s,d as T,p as $}from"./gkw12r6h.js";import{m as j,a as z,_ as R}from"./kct7g4kw.js";import{u as H,a as p}from"./ga5t764d.js";import"./hbj4jthp.js";import"./ou69qqfo.js";import"./l029o908.js";import"./o72f34uc.js";import"./f0d6w8jw.js";import"./lre3i2bd.js";import"./haj14tm7.js";import"./bb05g4e2.js";import"./n74k3onm.js";import"./c79akiu6.js";const L={class:"flex justify-end gap-2 sm:hidden px-4 my-2"},U={class:"flex flex-col divide-y divide-[#C0BEBF]/20"},ae=C({__name:"[id]",setup(q){const f=u(null),g=H(f);B(g,async e=>{e&&await m()});const l=u(!1),k=E().params.id,n=N({page:1,size:10}),t=u([]);V(async()=>{await _()});const _=async()=>{const e=await p("/memo/list",{...n,userId:parseInt(k)});t.value=e.list,l.value=e.hasNext},m=async()=>{n.page=n.page+1;const e=await p("/memo/list",n);t.value=[...t.value,...e.list],l.value=e.hasNext};return j.on(async()=>{await _()}),z.on(async e=>{const a=await p("/memo/get?latest=1&id="+e),i=t.value.findIndex(c=>c.id===e);i>=0&&(t.value[i]=a)}),(e,a)=>{const i=w,c=h;return s(),r(y,null,[o(t).length>0?(s(),v(i,{key:0,user:o(t)[0].user},null,8,["user"])):I("",!0),x("div",L,[M(c,{onClick:a[0]||(a[0]=d=>("navigateTo"in e?e.navigateTo:o($))("/")),icon:"i-carbon-arrow-left",size:"xs",color:"gray",variant:"solid"},{default:b(()=>a[1]||(a[1]=[T("返回")])),_:1})]),x("div",U,[(s(!0),r(y,null,F(o(t),d=>(s(),v(R,{memo:d,key:d.id},null,8,["memo"]))),128))]),o(l)?(s(),r("div",{key:1,ref_key:"loadMoreEle",ref:f,class:"text-xs text-center text-gray-500 py-2",onClick:m}," 点击加载更多 ",512)):(s(),r("div",{key:2,class:"text-xs text-center text-gray-500 py-2",onClick:m}," 已经到底啦 "))],64)}}});export{ae as default};
