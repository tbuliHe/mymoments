import{e as C,l as _,c as j}from"./mu41mkrl.js";import{e as O,m as J,V as B,r as k,M as b,o as f,c as m,C as v,O as F,x as I,y as S,z as M,A as U,J as V,B as Y,i as P,w as z,D as h,j as w,H as D,U as N}from"./c6lvz2om.js";import{_ as A}from"./ou69qqfo.js";const Z={base:"",background:"bg-white dark:bg-gray-900",divide:"divide-y divide-gray-200 dark:divide-gray-800",ring:"ring-1 ring-gray-200 dark:ring-gray-800",rounded:"rounded-lg",shadow:"shadow",body:{base:"",background:"",padding:"px-4 py-5 sm:p-6"},header:{base:"",background:"",padding:"px-4 py-5 sm:px-6"},footer:{base:"",background:"",padding:"px-4 py-4 sm:px-6"}};class y extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,y.prototype)}}const q=O({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:t,emit:s}){const n=C("$nde6rAbdbI"),u=_(`form-${n}`);J(()=>{u.on(async a=>{var i;a.type!=="submit"&&((i=e.validateOn)!=null&&i.includes(a.type))&&await g(a.path,{silent:!0})})}),B(()=>{u.reset()});const r=k([]);b("form-errors",r),b("form-events",u);const d=k({});b("form-inputs",d);async function $(){let a=await e.validate(e.state);if(e.schema)if(K(e.schema))a=a.concat(await L(e.state,e.schema));else if(H(e.schema))a=a.concat(await G(e.state,e.schema));else if(Q(e.schema))a=a.concat(await W(e.state,e.schema));else if(X(e.schema))a=a.concat(await x(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return a}async function g(a,i={silent:!1}){let o=a;if(a&&!Array.isArray(a)&&(o=[a]),o){const l=r.value.filter(c=>!o.includes(c.path)),p=(await $()).filter(c=>o.includes(c.path));r.value=l.concat(p)}else r.value=await $();if(r.value.length>0){if(i.silent)return!1;throw new y(`Form validation failed: ${JSON.stringify(r.value,null,2)}`)}return e.state}async function E(a){var o;const i=a;try{(o=e.validateOn)!=null&&o.includes("submit")&&await g();const l={...i,data:e.state};s("submit",l)}catch(l){if(!(l instanceof y))throw l;const p={...i,errors:r.value.map(c=>({...c,id:d.value[c.path]}))};s("error",p)}}return t({validate:g,errors:r,setErrors(a,i){i?r.value=r.value.filter(o=>o.path!==i).concat(a):r.value=a},async submit(){await E(new Event("submit"))},getErrors(a){return a?r.value.filter(i=>i.path===a):r.value},clear(a){a?r.value=r.value.filter(i=>i.path!==a):r.value=[]}}),{onSubmit:E}}});function H(e){return e.validate&&e.__isYupSchema__}function R(e){return e.inner!==void 0}async function G(e,t){try{return await t.validate(e,{abortEarly:!1}),[]}catch(s){if(R(s))return s.inner.map(n=>({path:n.path??"",message:n.message}));throw s}}function K(e){return e.parse!==void 0}async function L(e,t){const s=await t.safeParseAsync(e);return s.success===!1?s.error.issues.map(n=>({path:n.path.join("."),message:n.message})):[]}function Q(e){return e.validateAsync!==void 0&&e.id!==void 0}function T(e){return e.isJoi===!0}async function W(e,t){try{return await t.validateAsync(e,{abortEarly:!1}),[]}catch(s){if(T(s))return s.details.map(n=>({path:n.path.join("."),message:n.message}));throw s}}function X(e){return"_parse"in e||"_run"in e||typeof e=="function"&&"schema"in e}async function x(e,t){var n;return((n=(await("_parse"in t?t._parse(e):"_run"in t?t._run({typed:!1,value:e},{}):t(e))).issues)==null?void 0:n.map(u=>{var r;return{path:((r=u.path)==null?void 0:r.map(d=>d.key).join("."))||"",message:u.message}}))||[]}function ee(e,t,s,n,u,r){return f(),m("form",{onSubmit:t[0]||(t[0]=F((...d)=>e.onSubmit&&e.onSubmit(...d),["prevent"]))},[v(e.$slots,"default")],32)}const oe=A(q,[["render",ee]]),ae=I(S.ui.strategy,S.ui.card,Z),te=O({inheritAttrs:!1,props:{as:{type:String,default:"div"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:t,attrs:s}=j("card",M(e,"ui"),ae),n=U(()=>V(Y(t.value.base,t.value.rounded,t.value.divide,t.value.ring,t.value.shadow,t.value.background),e.class));return{ui:t,attrs:s,cardClass:n}}});function re(e,t,s,n,u,r){return f(),P(N(e.$attrs.onSubmit?"form":e.as),D({class:e.cardClass},e.attrs),{default:z(()=>[e.$slots.header?(f(),m("div",{key:0,class:h([e.ui.header.base,e.ui.header.padding,e.ui.header.background])},[v(e.$slots,"header")],2)):w("",!0),e.$slots.default?(f(),m("div",{key:1,class:h([e.ui.body.base,e.ui.body.padding,e.ui.body.background])},[v(e.$slots,"default")],2)):w("",!0),e.$slots.footer?(f(),m("div",{key:2,class:h([e.ui.footer.base,e.ui.footer.padding,e.ui.footer.background])},[v(e.$slots,"footer")],2)):w("",!0)]),_:3},16,["class"])}const ue=A(te,[["render",re]]);export{ue as _,oe as a};
