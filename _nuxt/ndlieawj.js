import{e as C,H as j,m as A,X as _,r as k,M as b,ab as J,o as c,c as m,B as v,E as P,S as B,P as F,v as M,x as S,y as Y,z,J as I,A as U,i as V,w as N,C as h,j as w,G as R,W as Z}from"./gkw12r6h.js";import{a as q}from"./bb05g4e2.js";import{_ as O}from"./ou69qqfo.js";import{c as D}from"./ga5t764d.js";const G={base:"",background:"bg-white dark:bg-gray-900",divide:"divide-y divide-gray-200 dark:divide-gray-800",ring:"ring-1 ring-gray-200 dark:ring-gray-800",rounded:"rounded-lg",shadow:"shadow",body:{base:"",background:"",padding:"px-4 py-5 sm:p-6"},header:{base:"",background:"",padding:"px-4 py-5 sm:px-6"},footer:{base:"",background:"",padding:"px-4 py-4 sm:px-6"}};class y extends Error{constructor(r){super(r),this.message=r,Object.setPrototypeOf(this,y.prototype)}}const H=C({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:r,emit:s}){const n=j(),u=q(`form-${n}`);A(()=>{u.on(async a=>{var i;a.type!=="submit"&&((i=e.validateOn)!=null&&i.includes(a.type))&&await p(a.path,{silent:!0})})}),_(()=>{u.reset()});const t=k([]);b("form-errors",t),b("form-events",u);const d=k({});b("form-inputs",d);async function E(){let a=await e.validate(e.state);if(e.schema)if(L(e.schema))a=a.concat(await Q(e.state,e.schema));else if(W(e.schema))a=a.concat(await K(e.state,e.schema));else if(T(e.schema))a=a.concat(await ee(e.state,e.schema));else if(ae(e.schema))a=a.concat(await re(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return a}async function p(a,i={silent:!1}){let o=a;if(a&&!Array.isArray(a)&&(o=[a]),o){const f=t.value.filter(l=>!o.includes(l.path)),g=(await E()).filter(l=>o.includes(l.path));t.value=f.concat(g)}else t.value=await E();if(t.value.length>0){if(i.silent)return!1;throw new y(`Form validation failed: ${JSON.stringify(t.value,null,2)}`)}return e.state}async function $(a){var o;const i=a;try{(o=e.validateOn)!=null&&o.includes("submit")&&await p(),i.data=e.state,s("submit",i)}catch(f){if(!(f instanceof y))throw f;const g={...i,errors:t.value.map(l=>({...l,id:d.value[l.path]}))};s("error",g)}}return r({validate:p,errors:t,setErrors(a,i){i?t.value=t.value.filter(o=>o.path!==i).concat(a):t.value=a},async submit(){await $(new Event("submit"))},getErrors(a){return a?t.value.filter(i=>i.path===a):t.value},clear(a){a?t.value=t.value.filter(i=>i.path!==a):t.value=[]}}),{onSubmit:$,errors:J(t)}}});function W(e){return e.validate&&e.__isYupSchema__}function X(e){return e.inner!==void 0}async function K(e,r){try{return await r.validate(e,{abortEarly:!1}),[]}catch(s){if(X(s))return s.inner.map(n=>({path:n.path??"",message:n.message}));throw s}}function L(e){return e.parse!==void 0}async function Q(e,r){const s=await r.safeParseAsync(e);return s.success===!1?s.error.issues.map(n=>({path:n.path.join("."),message:n.message})):[]}function T(e){return e.validateAsync!==void 0&&e.id!==void 0}function x(e){return e.isJoi===!0}async function ee(e,r){try{return await r.validateAsync(e,{abortEarly:!1}),[]}catch(s){if(x(s))return s.details.map(n=>({path:n.path.join("."),message:n.message}));throw s}}function ae(e){return"_parse"in e||"_run"in e||typeof e=="function"&&"schema"in e}async function re(e,r){var n;return((n=(await("_parse"in r?r._parse(e):"_run"in r?r._run({typed:!1,value:e},{}):r(e))).issues)==null?void 0:n.map(u=>{var t;return{path:((t=u.path)==null?void 0:t.map(d=>d.key).join("."))||"",message:u.message}}))||[]}function te(e,r,s,n,u,t){return c(),m("form",{onSubmit:r[0]||(r[0]=F((...d)=>e.onSubmit&&e.onSubmit(...d),["prevent"]))},[v(e.$slots,"default",P(B({errors:e.errors})))],32)}const ce=O(H,[["render",te]]),se=M(S.ui.strategy,S.ui.card,G),ne=C({inheritAttrs:!1,props:{as:{type:String,default:"div"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:r,attrs:s}=D("card",Y(e,"ui"),se),n=z(()=>I(U(r.value.base,r.value.rounded,r.value.divide,r.value.ring,r.value.shadow,r.value.background),e.class));return{ui:r,attrs:s,cardClass:n}}});function ie(e,r,s,n,u,t){return c(),V(Z(e.$attrs.onSubmit?"form":e.as),R({class:e.cardClass},e.attrs),{default:N(()=>[e.$slots.header?(c(),m("div",{key:0,class:h([e.ui.header.base,e.ui.header.padding,e.ui.header.background])},[v(e.$slots,"header")],2)):w("",!0),e.$slots.default?(c(),m("div",{key:1,class:h([e.ui.body.base,e.ui.body.padding,e.ui.body.background])},[v(e.$slots,"default")],2)):w("",!0),e.$slots.footer?(c(),m("div",{key:2,class:h([e.ui.footer.base,e.ui.footer.padding,e.ui.footer.background])},[v(e.$slots,"footer")],2)):w("",!0)]),_:3},16,["class"])}const fe=O(ne,[["render",ie]]);export{fe as _,ce as a};
