import{_ as w}from"./cdhi6rl9.js";import{m as E,a as B,_ as C}from"./kct7g4kw.js";import{a as r,u as M}from"./ga5t764d.js";import{e as N,g as F,r as i,m as v,k as V,l as b,c,h as m,i as x,j as I,a as R,F as $,n as j,o as a}from"./gkw12r6h.js";import"./hbj4jthp.js";import"./ou69qqfo.js";import"./l029o908.js";import"./o72f34uc.js";import"./f0d6w8jw.js";import"./lre3i2bd.js";import"./haj14tm7.js";import"./bb05g4e2.js";import"./n74k3onm.js";import"./c79akiu6.js";const z={class:"flex flex-col divide-y divide-[#C0BEBF]/20"},X=N({__name:"[tag]",setup(H){const d=F(),g=d.params.username,k=d.params.tag,l=i();v(async()=>{l.value=await r("/user/profile/"+g),await y()});const f=i(null),h=M(f);V(h,async e=>{e&&await p()});const u=i(!1),s=b({page:1,size:10,tag:k}),t=i([]);v(async()=>{});const y=async()=>{s.page=1;const e=await r("/memo/list",s);t.value=e.list,u.value=e.hasNext},p=async()=>{s.page=s.page+1;const e=await r("/memo/list",s);t.value=[...t.value,...e.list],u.value=e.hasNext};return E.on(async()=>{await y()}),B.on(async e=>{const _=await r("/memo/get?latest=1&id="+e),o=t.value.findIndex(n=>n.id===e);o>=0&&(t.value[o]=_)}),(e,_)=>{const o=w;return a(),c("div",null,[m(l)?(a(),x(o,{key:0,user:m(l)},null,8,["user"])):I("",!0),R("div",z,[(a(!0),c($,null,j(m(t),n=>(a(),x(C,{memo:n,key:n.id},null,8,["memo"]))),128))]),m(u)?(a(),c("div",{key:1,ref_key:"loadMoreEle",ref:f,class:"text-xs text-center text-gray-500 py-2",onClick:p}," 点击加载更多 ",512)):(a(),c("div",{key:2,class:"text-xs text-center text-gray-500 py-2",onClick:p}," 已经到底啦 "))])}}});export{X as default};
