import{_ as w}from"./b8cufphi.js";import{e as E,g as B,r,m as v,k as C,l as M,c as i,h as c,i as x,j as N,a as F,F as V,n as b,o as t}from"./c6lvz2om.js";import{a as l,u as I}from"./mu41mkrl.js";import{m as R,a as $,_ as j}from"./n2mvuj8p.js";import"./k2lpch8j.js";import"./ou69qqfo.js";import"./mtqglvzn.js";import"./b72e89xr.js";import"./bbphsdkx.js";import"./ci6p5ad3.js";import"./cmw3t82p.js";import"./mjllnmi0.js";import"./gvd3ebac.js";const z={class:"flex flex-col divide-y divide-[#C0BEBF]/20"},W=E({__name:"[tag]",setup(H){const d=B(),g=d.params.username,k=d.params.tag,m=r();v(async()=>{m.value=await l("/user/profile/"+g),await y()});const f=r(null),h=I(f);C(h,async e=>{e&&await p()});const u=r(!1),s=M({page:1,size:10,tag:k}),a=r([]);v(async()=>{});const y=async()=>{s.page=1;const e=await l("/memo/list",s);a.value=e.list,u.value=e.hasNext},p=async()=>{s.page=s.page+1;const e=await l("/memo/list",s);a.value=[...a.value,...e.list],u.value=e.hasNext};return R.on(async()=>{await y()}),$.on(async e=>{const _=await l("/memo/get?latest=1&id="+e),o=a.value.findIndex(n=>n.id===e);o>=0&&(a.value[o]=_)}),(e,_)=>{const o=w;return t(),i("div",null,[c(m)?(t(),x(o,{key:0,user:c(m)},null,8,["user"])):N("",!0),F("div",z,[(t(!0),i(V,null,b(c(a),n=>(t(),x(j,{memo:n,key:n.id},null,8,["memo"]))),128))]),c(u)?(t(),i("div",{key:1,ref_key:"loadMoreEle",ref:f,class:"text-xs text-center text-gray-500 py-2",onClick:p}," 点击加载更多 ",512)):(t(),i("div",{key:2,class:"text-xs text-center text-gray-500 py-2",onClick:p}," 已经到底啦 "))])}}});export{W as default};
