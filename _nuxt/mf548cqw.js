import{_ as h}from"./cdhi6rl9.js";import{m as k,a as w,_ as E}from"./kct7g4kw.js";import{u as B,a as l}from"./ga5t764d.js";import{e as C,f as _,r as c,k as N,l as M,m as b,c as r,b as F,h as m,a as V,F as x,n as I,o as a,i as L}from"./gkw12r6h.js";import"./hbj4jthp.js";import"./ou69qqfo.js";import"./l029o908.js";import"./o72f34uc.js";import"./f0d6w8jw.js";import"./lre3i2bd.js";import"./haj14tm7.js";import"./bb05g4e2.js";import"./n74k3onm.js";import"./c79akiu6.js";const $={class:"flex flex-col divide-y divide-[#C0BEBF]/20"},z={key:1,class:"text-xs text-center text-gray-500 py-2"},W=C({__name:"index",setup(A){const y=_("userinfo"),v=_("sysConfig"),u=c(null),g=B(u);N(g,async e=>{e&&v.value.enableAutoLoadNextPage&&await p()});const i=c(!1),s=M({page:1,size:10}),t=c([]);b(async()=>{await d()});const d=async()=>{s.page=1;const e=await l("/memo/list",s);t.value=e.list,i.value=e.hasNext},p=async()=>{s.page=s.page+1;const e=await l("/memo/list",s);t.value=[...t.value,...e.list],i.value=e.hasNext};return k.on(async()=>{await d()}),w.on(async e=>{const f=await l("/memo/get?latest=1&id="+e),o=t.value.findIndex(n=>n.id===e);o>=0&&(t.value[o]=f)}),(e,f)=>{const o=h;return a(),r(x,null,[F(o,{user:m(y)},null,8,["user"]),V("div",$,[(a(!0),r(x,null,I(m(t),n=>(a(),L(E,{memo:n,key:n.id,"show-full":!1},null,8,["memo"]))),128))]),m(i)?(a(),r("div",{key:0,ref_key:"loadMoreEle",ref:u,class:"text-xs text-center text-gray-500 py-2 cursor-pointer",onClick:p},"点击加载更多",512)):(a(),r("div",z,"已经到底啦"))],64)}}});export{W as default};
