import{_ as k,a as F,b as R}from"./b8cufphi.js";import{_ as j}from"./cvxw6bcr.js";import{_ as w}from"./b72e89xr.js";import{_ as M}from"./di7jvcfs.js";import{_ as L}from"./mjllnmi0.js";import{_ as G}from"./clew9nxz.js";import{e as O,f as T,r as H,l as P,m as B,c as b,b as a,h as l,a as r,w as n,t as $,j as V,F as g,s as y,o as f,d as v,p as z}from"./c6lvz2om.js";import{a as S,d as I}from"./mu41mkrl.js";import"./k2lpch8j.js";import"./ou69qqfo.js";import"./cmw3t82p.js";import"./mtqglvzn.js";const D={class:"space-y-4 flex flex-col p-4 my-4 dark:bg-neutral-800"},E={class:"flex justify-end gap-2 sm:hidden"},J={class:"flex justify-end text-xs text-gray-400"},q={key:0},me=O({__name:"settings",setup(Q){const c=T("userinfo"),p=H(""),o=P({enableGoogleRecaptcha:!1,googleSiteKey:"",googleSecretKey:"",enableAutoLoadNextPage:!0,enableComment:!0,enableRegister:!0,maxCommentLength:120,memoMaxHeight:300,commentOrder:"desc",timeFormat:"timeAgo",adminUserName:"admin",title:"极简朋友圈",favicon:"/favicon.ico",beiAnNo:"",css:"",js:"",enableS3:!1,s3:{domain:"",bucket:"",region:"",accessKey:"",secretKey:"",endpoint:"",thumbnailSuffix:""}}),K=async()=>{const d=await S("/sysConfig/getFull");d&&(Object.assign(o,d),p.value=d.version)},C=async()=>{await S("/sysConfig/save",o),y.success("保存成功"),location.reload()},N=async d=>{for(let s=0;s<d.length;s++)if(d[s].type.indexOf("image")<0){y.error("只能上传图片");return}const e=await I(d);y.success("上传成功"),e&&(o.favicon=e[0])};return B(async()=>{await K()}),(d,e)=>{const s=k,x=F,m=R,u=j,A=w,i=M,U=L,_=G;return f(),b(g,null,[a(s,{user:l(c)},null,8,["user"]),r("div",D,[r("div",E,[a(x,{onClick:e[0]||(e[0]=t=>("navigateTo"in d?d.navigateTo:l(z))("/")),icon:"i-carbon-arrow-left",size:"xs",color:"gray",variant:"solid"},{default:n(()=>e[25]||(e[25]=[v("返回")])),_:1})]),r("div",J,[l(p)?(f(),b("div",q,"版本号: "+$(l(p)),1)):V("",!0)]),a(u,{label:"管理员账号",name:"adminUserName",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).adminUserName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(o).adminUserName=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"网站标题",name:"title",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).title,"onUpdate:modelValue":e[2]||(e[2]=t=>l(o).title=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"Favicon",name:"favicon",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{type:"file",size:"sm",icon:"i-heroicons-folder",onChange:N}),e[26]||(e[26]=r("div",{class:"text-gray-500 text-sm my-2"},"或者输入在线地址",-1)),a(m,{modelValue:l(o).favicon,"onUpdate:modelValue":e[3]||(e[3]=t=>l(o).favicon=t),class:"mb-2"},null,8,["modelValue"]),a(A,{src:l(o).favicon},null,8,["src"])]),_:1}),a(u,{label:"首页是否自动加载下一页",name:"enableAutoLoadNextPage",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(i,{modelValue:l(o).enableAutoLoadNextPage,"onUpdate:modelValue":e[4]||(e[4]=t=>l(o).enableAutoLoadNextPage=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"是否启用评论",name:"enableComment",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(i,{modelValue:l(o).enableComment,"onUpdate:modelValue":e[5]||(e[5]=t=>l(o).enableComment=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"是否开启注册用户",name:"enableRegister",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(i,{modelValue:l(o).enableRegister,"onUpdate:modelValue":e[6]||(e[6]=t=>l(o).enableRegister=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"备案号",name:"beiAnNo",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).beiAnNo,"onUpdate:modelValue":e[7]||(e[7]=t=>l(o).beiAnNo=t),placeholder:"没有可以不填写"},null,8,["modelValue"])]),_:1}),a(u,{label:"自定义CSS",name:"css",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(U,{modelValue:l(o).css,"onUpdate:modelValue":e[8]||(e[8]=t=>l(o).css=t),rows:5},null,8,["modelValue"])]),_:1}),a(u,{label:"自定义JS",name:"js",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(U,{modelValue:l(o).js,"onUpdate:modelValue":e[9]||(e[9]=t=>l(o).js=t),rows:5},null,8,["modelValue"])]),_:1}),a(u,{label:"评论最大字数",name:"maxCommentLength",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).maxCommentLength,"onUpdate:modelValue":e[10]||(e[10]=t=>l(o).maxCommentLength=t),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),a(u,{label:"发言最大高度(单位px,填0时则不限制高度)",name:"memoMaxHeight",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).memoMaxHeight,"onUpdate:modelValue":e[11]||(e[11]=t=>l(o).memoMaxHeight=t),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),a(u,{label:"评论排序方式(按日期)",name:"commentOrder",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(_,{modelValue:l(o).commentOrder,"onUpdate:modelValue":e[12]||(e[12]=t=>l(o).commentOrder=t),options:[{label:"倒序,越晚发布越靠前",value:"desc"},{label:"正序,越早发布越靠前",value:"asc"}],"value-attribute":"value","option-attribute":"label"},null,8,["modelValue"])]),_:1}),a(u,{label:"日期格式",name:"timeFormat",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(_,{modelValue:l(o).timeFormat,"onUpdate:modelValue":e[13]||(e[13]=t=>l(o).timeFormat=t),options:[{label:"几分钟前",value:"timeAgo"},{label:"2024-07-24 09:56:55",value:"time"}],"value-attribute":"value","option-attribute":"label"},null,8,["modelValue"])]),_:1}),a(u,{label:"是否启用Google Recaptcha",name:"enableGoogleRecaptcha",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(i,{modelValue:l(o).enableGoogleRecaptcha,"onUpdate:modelValue":e[14]||(e[14]=t=>l(o).enableGoogleRecaptcha=t)},null,8,["modelValue"])]),_:1}),l(o).enableGoogleRecaptcha?(f(),b(g,{key:0},[a(u,{label:"SiteKey",name:"googleSiteKey",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).googleSiteKey,"onUpdate:modelValue":e[15]||(e[15]=t=>l(o).googleSiteKey=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"SecretKey",name:"googleSecretKey",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).googleSecretKey,"onUpdate:modelValue":e[16]||(e[16]=t=>l(o).googleSecretKey=t)},null,8,["modelValue"])]),_:1})],64)):V("",!0),a(u,{label:"是否启用S3存储",name:"s3",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(i,{modelValue:l(o).enableS3,"onUpdate:modelValue":e[17]||(e[17]=t=>l(o).enableS3=t)},null,8,["modelValue"])]),_:1}),l(o).enableS3?(f(),b(g,{key:1},[a(u,{label:"域名",name:"domain",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).s3.domain,"onUpdate:modelValue":e[18]||(e[18]=t=>l(o).s3.domain=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"桶名",name:"bucket",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).s3.bucket,"onUpdate:modelValue":e[19]||(e[19]=t=>l(o).s3.bucket=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"地区",name:"region",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).s3.region,"onUpdate:modelValue":e[20]||(e[20]=t=>l(o).s3.region=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"AccessKey",name:"accessKey",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).s3.accessKey,"onUpdate:modelValue":e[21]||(e[21]=t=>l(o).s3.accessKey=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"SecretKey",name:"secretKey",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).s3.secretKey,"onUpdate:modelValue":e[22]||(e[22]=t=>l(o).s3.secretKey=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"S3 API接口地址",name:"endpoint",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).s3.endpoint,"onUpdate:modelValue":e[23]||(e[23]=t=>l(o).s3.endpoint=t)},null,8,["modelValue"])]),_:1}),a(u,{label:"图片后缀",name:"thumbnailSuffix",ui:{label:{base:"font-bold"}}},{default:n(()=>[a(m,{modelValue:l(o).s3.thumbnailSuffix,"onUpdate:modelValue":e[24]||(e[24]=t=>l(o).s3.thumbnailSuffix=t)},null,8,["modelValue"])]),_:1})],64)):V("",!0),a(x,{class:"justify-center",onClick:C},{default:n(()=>e[27]||(e[27]=[v("保存")])),_:1})])],64)}}});export{me as default};
